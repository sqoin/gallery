//import { url } from '@/assets/img';

export const state = () => ({
  products: [
    {
      id: 1,
      title: 'Picture 1',
      description: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit',
      image: 'https://cdn.pixabay.com/photo/2015/12/01/20/28/road-1072823_960_720.jpg',
      price: 1,
      ratings: 3,
      reviews: 5,
      isAddedToCart: false,
      isAddedBtn: false,
      isFavourite: false,
      quantity: 1,
      isPurchased: false,
      owner: 1
    
    },
    {
      id: 2,
      title: 'Picture 2',
      description: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit',
      image: 'https://images.pexels.com/photos/159823/kids-girl-pencil-drawing-159823.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500',
      price: 1,
      ratings: 5,
      reviews: 10,
      isAddedToCart: false,
      isAddedBtn: false,
      isFavourite: false,
      quantity: 1,
      isPurchased: false,
      owner: 1
    },
    {
      id: 3,
      title: 'Picture 3',
      description: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit',
     image: 'https://wallpaperhdzone.com/wp-content/uploads/2017/09/penguin-images-free-description-lovely-penguin-free-images-for-desktop-is-a-free-wallpaper-wp6808999-280x158.jpg',
      price: 1,
      ratings: 2,
      reviews: 3,
      isAddedToCart: false,
      isAddedBtn: false,
      isFavourite: false,
      isPurchased: false,
      quantity: 1,
      owner: 2
    },
    {
      id: 4,
     title: 'Picture 4',
     description: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit',
     image: 'https://wallpaperhdzone.com/wp-content/uploads/2016/02/wallpaper-installation-nyc5-280x158.jpg',
      price: 50,
      ratings: 1,
      reviews: 0,
      isAddedToCart: false,
      isAddedBtn: false,
      isFavourite: false,
      isPurchased: false,
      quantity: 1,
      owner: 3
    },
    {
      id: 5,
      title: 'Picture 5',
     description: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit',
     image: 'https://wallpaperhdzone.com/wp-content/uploads/2016/07/wallpaper-of-nature6-600x375.jpg',
      price: 1,
      ratings: 4,
      reviews: 2,
      isAddedToCart: false,
      isAddedBtn: false,
      isFavourite: false,
      isPurchased: false,
      quantity: 1,
      owner: 1
    },
    {
      id: 6,
      title: 'Picture 6',
      description: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit',
      image: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSxKsQnMxaD6oLNiFnOd4fpXJqbyhw_bcxjUqfDjHIZrJMCozwu&s',
      price: 1,
      ratings: 1,
      reviews: 1,
      isAddedToCart: false,
      isAddedBtn: false,
      isFavourite: false,
      isPurchased: false,
      quantity: 1,
      owner: 1
    },
    {
      id: 7,
      title: 'Picture 7',
      description: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit',
      image: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRogSToK0JM9x-f0K-GD6qj3yBjQ8fIerlj2f7a-AuOLxfRM5Zd&s',
      price: 1,
      ratings: 5,
      reviews: 7,
      isAddedToCart: false,
      isAddedBtn: false,
      isFavourite: false,
      isPurchased: false,
      quantity: 1,
      owner: 2
    },
    
    {
      id: 8,
      title: 'Picture 8',
      description: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit',
      image: 'https://wallpaperhdzone.com/wp-content/uploads/2017/08/New-York-Manhattan-Night-City-new-york-manhattan-night-city-1080p-new-york-ma-wallpaper-wp6408176.jpg',
      price: 1,
      ratings: 3,
      reviews: 0,
      isAddedToCart: false,
      isAddedBtn: false,
      isFavourite: false,
      isPurchased: false,
      quantity: 1,
      owner: 3
    },
    {
      id: 9,
      title: 'Picture 9',
     description: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit',
      image: 'https://wallpaperhdzone.com/wp-content/uploads/2017/08/beautiful-nature-background-hd-HD-Nature-Beautiful-Nature-Free-Background-w-wallpaper-wp6602781.jpg',
      price: 110,
      ratings: 4,
      reviews: 2,
      isAddedToCart: false,
      isAddedBtn: false,
      isFavourite: false,
      isPurchased: false,
      quantity: 1,
      owner: 2
    },
    {
      id: 10,
      title: 'Picture 10',
      description: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit',
      image: 'https://wallpaperhdzone.com/wp-content/uploads/2016/02/cute-wallpapers-for-phones5-280x158.jpg',
      price: 1,
      ratings: 3,
      reviews: 0,
      isAddedToCart: false,
      isAddedBtn: false,
      isFavourite: false,
      isPurchased: false,
      quantity: 1,
      owner: 1
    },
    {
      id: 11,
      title: 'Picture 11',
      description: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit',
      image: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTJZuMk97I1f32MxU--VOzrqLYLrvHmqB9u45-LNrwMEZ8hFGyFkw&s',
      price: 1,
      ratings: 3,
      reviews: 0,
      isAddedToCart: false,
      isAddedBtn: false,
      isFavourite: false,
      isPurchased: false,
      quantity: 1,
      owner: 3
    },
    {
      id: 12,
      title: 'Picture 12',
      description: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit',
      image: 'http://www.designindaba.com/sites/default/files/vocab/topics/15/urban-landscape-design-Christo.jpg',
      price: 1,
      ratings: 3,
      reviews: 0,
      isAddedToCart: false,
      isAddedBtn: false,
      isFavourite: false,
      isPurchased: false,
      quantity: 1,
      owner: 3
    },
    {
      id: 13,
      title: 'Picture 13',
      description: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit',
      image: 'https://wallpaperhdzone.com/wp-content/uploads/2016/02/cavern-wallpaper5-280x158.jpg',
      price: 1,
      ratings: 3,
      reviews: 0,
      isAddedToCart: false,
      isAddedBtn: false,
      isFavourite: false,
      isPurchased: false,
      quantity: 1,
      owner: 2
    },
    
    {
      id: 14,
      title: 'Picture 14',
      description: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit',
      image: 'https://wallpaperhdzone.com/wp-content/uploads/2016/08/wallpaper-for-kids-HD7-300x169.jpg',
      price: 1,
      ratings: 3,
      reviews: 0,
      isAddedToCart: false,
      isAddedBtn: false,
      isFavourite: false,
      isPurchased: false,
      quantity: 1,
      owner: 1
    },
    {
      id: 15,
      title: 'Picture 15',
      description: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit',
      image: 'https://wallpaperhdzone.com/wp-content/uploads/2016/07/dogs-wallpaper5-600x375.jpg',
      price: 1,
      ratings: 3,
      reviews: 0,
      isAddedToCart: false,
      isAddedBtn: false,
      isFavourite: false,
      isPurchased: false,
      quantity: 1,
      owner: 1
    },
    {
      id: 16,
      title: 'Picture 16',
      description: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit',
      image: 'https://wallpaperhdzone.com/wp-content/uploads/2016/07/los-angeles-wallpaper5-600x375.jpg',
      price: 1,
      ratings: 3,
      reviews: 0,
      isAddedToCart: false,
      isAddedBtn: false,
      isFavourite: false,
      isPurchased: false,
      isBuyed:false,
      quantity: 1,
      owner: 1
    }
  ],
  users: [
    {
      id: 1,
      name: 'Kirito',
      username: 'kirito',
      email: 'gahlouzi.saif.93@gmail.com',
      password: '123',
    },
    {
      id: 2,
      name: 'Walid',
      username: 'walid',
      email: 'walid@gmail.com',
      password: '123',
    },
    {
      id: 3,
      name: 'Dhoha',
      username: 'dhoha',
      email: 'dhoha@gmail.com',
      password: '123',

    }
  ],
  achats: [
    {
      id: 1,
      idUser: 1,
      idImage: 2
    },
    {
      id: 2,
      idUser: 1,
      idImage: 3
    },
    {
      id: 3,
      idUser: 2,
      idImage: 2
    }
  ],
  userInfo: {
    isLoggedIn: false,
    isSignedUp: false,
    hasSearched: false,
    name: '',

    productTitleSearched: '',
    photo:'https://images.pexels.com/users/avatars/197616/javon-swaby-495.jpeg?w=256&h=256&fit=crop&crop=faces',
   

    id: null,
  

  },
  systemInfo: {
    openLoginModal: false,
    openSignupModal: false,
    openCheckoutModal: false
  }
})

export const getters = {
  productsAdded: state => {
    return state.products.filter(el => {
      return el.isAddedToCart;
    });
  },
  productsSold: state => {
    return state.products.filter(function(element) {
      return (element.owner === state.userInfo.id);
    });
  },
  productsPurchased: state => {
    return state.products.filter(el => {
      return (el.isPurchased);
    });
  },
  productsAddedToFavourite: state => {
    return state.products.filter(el => {
      return el.isFavourite;
    });
  },
  productsBuyed: state =>{
    return state.products.filter(el => {
      return el.isBuyed;
    })
  },
  getProductById: state => id => {
    return state.products.find(product => product.id == id);
  },
  isUserLoggedIn: state => {
    return state.userInfo.isLoggedIn;
  },
  isUserSignedUp: state => {
    return state.userInfo.isSignedUp;
  },
  getUserName: state => {
    return state.userInfo.name;
  },

  isLoginModalOpen: state => {
    return state.systemInfo.openLoginModal;
  },
  isSignupModalOpen: state => {
    return state.systemInfo.openSignupModal;
  },
  isCheckoutModalOpen: state => {
    return state.systemInfo.openCheckoutModal;
  },
  quantity: state => {
    return state.products.quantity;
  }
}

export const mutations = {
  checkUser: (state, authUser) => {
    state.users.forEach(el => {
      if (authUser.email === el.email && authUser.password === el.password) {
        var info ={name:el.name, id:el.id};
        localStorage.setItem("info", JSON.stringify(info));
        state.userInfo.isLoggedIn=true;
        state.userInfo.name=el.name;
        state.userInfo.id=el.id;
      }
    });
  },
  logout(state) {
    state.userInfo.isLoggedIn = false;
    state.userInfo.name = '';
    state.userInfo.id = null;
    localStorage.removeItem("info");
  },
  addToCart: (state, id) => {
    state.products.forEach(el => {
      if (id === el.id) {
        el.isAddedToCart = true;
      }
    });
  },
  purchase: (state, id) => {
    state.products.forEach(el => {
      if (id === el.id) {
        el.isPurchased = true;
      }
    });
  },
  addToShoppingList: (state, id) => {
    state.products.forEach(el => {
      if (id === el.id) {
        el.isBuyed = true;
      }
    });
  },
  setAddedBtn: (state, data) => {
    state.products.forEach(el => {
      if (data.id === el.id) {
        el.isAddedBtn = data.status;
      }
    });
  },
  deleteFromCart: (state)=>{
    state.products.forEach(el =>{
      el.isAddedToCart = false;
    }

    )

  },
  removeFromCart: (state, id) => {
    state.products.forEach(el => {
      if (id === el.id) {
        el.isAddedToCart = false;
      }
    });
  },
  removeProductsFromFavourite: state => {
    state.products.filter(el => {
      el.isFavourite = false;
    });
  },
  isUserLoggedIn: (state, isUserLoggedIn) => {
    state.userInfo.isLoggedIn = isUserLoggedIn;
  },
  isUserSignedUp: (state, isSignedUp) => {
    state.userInfo.isSignedUp = isSignedUp;
  },
  setHasUserSearched: (state, hasSearched) => {
    state.userInfo.hasSearched = hasSearched;
  },
  setUserName: (state, name) => {
    state.userInfo.name = name;
  },
  setProductTitleSearched: (state, titleSearched) => {
    state.userInfo.productTitleSearched = titleSearched;
  },
  showLoginModal: (state, show) => {
    state.systemInfo.openLoginModal = show;
  },
  showSignupModal: (state, show) => {
    state.systemInfo.openSignupModal = show;
  },
  showCheckoutModal: (state, show) => {
    state.systemInfo.openCheckoutModal = show;
  },
  addToFavourite: (state, id) => {
    state.products.forEach(el => {
      if (id === el.id) {
        el.isFavourite = true;
      }
    });
  },
  removeFromFavourite: (state, id) => {
    state.products.forEach(el => {
      if (id === el.id) {
        el.isFavourite = false;
      }
    });
  },
  quantity: (state, data) => {
    state.products.forEach(el => {
      if (data.id === el.id) {
        el.quantity = data.quantity;
      }
    });
  },
  SET_USER(state, authUser) {
    state.authUser = authUser
  },
  setLoginDataFromLocalStorage: (state, authUser) => {
    state.userInfo.isLoggedIn = true;
    state.userInfo.name=authUser.name;
    state.userInfo.id=authUser.id;
  }
}
/* 
export const actions = {
  async nuxtServerInit({ commit }) {
    const res = await this.$axios.get("/api/current_user")
    commit("SET_USER", res.data)
  },

  async logout({ commit }) {
    const { data } = await this.$axios.get("/api/logout")
    if (data.ok) commit("SET_USER", null)
  },

  async handleToken({ commit }, token) {
    const res = await this.$axios.post("/api/stripe", token)
    commit("SET_USER", res.data)
  }
} */
